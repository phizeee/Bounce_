<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AI.Tech - Artificial Intelligence HTML Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="/static/img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Ubuntu:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/static/lib/animate/animate.min.css" rel="stylesheet">
    <link href="/static/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="/static/css/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.umd.min.js"></script>
    <style>
        /* CSS for the spinner */
        .loader {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            z-index: 1000000;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            display: none; /* Hidden by default */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Center the loader */
        #loader-container {
            display: none;
            text-align: center;
            margin-top: 20px;
            z-index: 9999;
            backdrop-filter: blur(5px);
            transition: opacity 0.3s ease;
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

      <!-- Loader (Spinner) -->
    <div id="loader-container"  style="z-index: 9999; backdrop-filter: blur(5px);">
        <div class="loader"></div>
        <p>Loading...</p>
    </div>
    <!-- Spinner End -->


    <!-- Navbar Start -->
    <div class="container-fluid sticky-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-dark p-0">
                <a href="index.html" class="navbar-brand">
                    <h1 class="text-white">Peter<span class="text-dark"></span> Chithambo</h1>
                </a>
                <button type="button" class="navbar-toggler ms-auto me-0" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->


    <!-- Hero Start -->
    <div class="container-fluid pt-5 bg-primary hero-header mb-5">
        <div class="container pt-5">
            <div class="row g-5 pt-5">
                <div class="col-lg-6 align-self-center text-center text-lg-start mb-lg-5">
                    <!--<div class="btn btn-sm border rounded-pill text-white px-3 mb-3 animated slideInRight">AI.Tech</div>-->
                    <h1 class="display-4 text-white mb-4 animated slideInRight">Retrieval-Augmented Generation (RAG)</h1>
                    <p class="text-white mb-4 animated slideInRight">An application with a backend system to analyse and compare two provided datasets of survey
                        results. It has a frontend that communicates with a Python backend running
                        FastAPI. The application should allow users to explore, analyse, and cross-compare the datasets
                        using AI-powered interactions.</p>
                   <!-- <a href="" class="btn btn-light py-sm-3 px-sm-5 rounded-pill me-3 animated slideInRight">Read More</a>
                    <a href="" class="btn btn-outline-light py-sm-3 px-sm-5 rounded-pill animated slideInRight">Contact Us</a>-->
                </div>
                <div class="col-lg-6 align-self-end text-center text-lg-end">
                    <img class="img-fluid" src="/static/img/hero-img.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Hero End -->




    <!-- About Start -->
    <div class="container-fluid py-5">
        <div class="container">
            <div class="row g-5 align-items-center">
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                    <div class="about-img">
                        <img class="img-fluid" src="/static/img/about-img.jpg">
                    </div>
                </div>
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
                    <div class="btn btn-sm border rounded-pill text-primary px-3 mb-3">About</div>
                    <h1 class="mb-4">About my application</h1>
                    <p class="mb-4">This application is built using Python Fastapi for the backend. Integrated with OpenAi api. The OpenAi
                        module is used for vector embeddings of the survey data. It uses Scikit-learn for analyze and comparison of the two dataset.
                        The application is built using HTML5, CSS JS & Bootstrap for the frontend.
                    </p>
                    <div class="row g-3">
                        <div class="col-sm-6">
                            <h6 class="mb-3"><i class="fa fa-check text-primary me-2"></i>Python FastAPI</h6>
                            <h6 class="mb-0"><i class="fa fa-check text-primary me-2"></i>OpenAI</h6>
                        </div>
                        <div class="col-sm-6">
                            <h6 class="mb-3"><i class="fa fa-check text-primary me-2"></i>RAG system</h6>
                            <h6 class="mb-0"><i class="fa fa-check text-primary me-2"></i>Frontend</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- About End -->


    <!-- Service Start -->
    <div class="container-fluid bg-light mt-5 py-5">
        <div class="container py-5">
            <div class="row g-5 align-items-center">
                <div class="table-responsive" data-wow-delay="0.1s">
                    <h1 class="mb-4">Columns For Sustainability Dataset survey</h1>
                    <table class="table  table-striped table-bordered table-dark" style="width: 100% !important;">
                        <thead  class="thead-dark">
                            <tr>
                                <!-- Extract keys from the first dictionary to create table headers -->
                                {% for key in data.sustainability.columns.keys() %}
                                    <th scope="col">{{ key | capitalize }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Determine the maximum number of rows based on the longest column -->
                            {% set max_rows = data.sustainability.columns.values() | map('length') | max %}

                            <!-- Loop through each row index -->
                            {% for i in range(max_rows) %}
                            <tr>
                                <!-- Loop through each column and fill in the corresponding value or empty cell -->
                                {% for col_name, col_values in data.sustainability.columns.items() %}
                                    <td>
                                        {% if i < col_values | length %}
                                            {{ col_values[i] }}
                                        {% else %}
                                            <!-- If the current row index exceeds the column length, leave it empty -->
                                            &nbsp;
                                        {% endif %}
                                    </td>
                                {% endfor %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="table-responsive">
                    <h1 class="mb-4">Columns For Christmas Dataset survey</h1>
                    <table border="1" class="table table-striped table-bordered table-dark" style="width: 100%;">
                        <thead class="thead-dark">
                            <tr>
                                <!-- Extract keys from the first dictionary to create table headers -->
                                {% for key in data.christmas.columns.keys() %}
                                    <th scope="col">{{ key | capitalize }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Determine the maximum number of rows based on the longest column -->
                            {% set max_rows = data.christmas.columns.values() | map('length') | max %}

                            <!-- Loop through each row index -->
                            {% for i in range(max_rows) %}
                            <tr>
                                <!-- Loop through each column and fill in the corresponding value or empty cell -->
                                {% for col_name, col_values in data.christmas.columns.items() %}
                                    <td>
                                        {% if i < col_values | length %}
                                            {{ col_values[i] }}
                                        {% else %}
                                            <!-- If the current row index exceeds the column length, leave it empty -->
                                            &nbsp;
                                        {% endif %}
                                    </td>
                                {% endfor %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
    <!-- Service End -->


    <!-- Newsletter Start -->
    <div class="container-fluid bg-primary newsletter py-5">
        <div class="container">
            <div class="row g-5 align-items-center">
                <div class="col-md-5 ps-lg-0 pt-5 pt-md-0 text-start wow fadeIn" data-wow-delay="0.3s">
                    <img class="img-fluid" src="/static/img/newsletter.png" alt="">
                </div>
                <div class="col-md-7 py-5 newsletter-text wow fadeIn" data-wow-delay="0.5s">
                    <div class="btn btn-sm border rounded-pill text-white px-3 mb-3">My Model</div>
                    <h1 class="text-white mb-4">Query Model</h1>
                    <div class="position-relative w-100 mt-3 mb-2">
                         <form onsubmit="handleSubmit(event)">
                        <input class="form-control border-0 rounded-pill w-100 ps-4 pe-5" type="text"
                            placeholder="Enter Your Query" style="height: 48px;" required name="query" id="query">
                        <button type="submit" value="Submit" class="btn shadow-none position-absolute top-0 end-0 mt-1 me-2"><i
                                class="fa fa-paper-plane text-primary fs-4"></i></button>
                         </form>
                    </div>
                    <small class="text-white-50">E.g "How can we improve sustainability?"</small>
                    <!-- This div will display the markdown content -->
                    <div class="col-sm-12">
                            <div class="d-flex rounded p-3" style="background: rgba(256, 256, 256, 0.1);">
                                <div class="ms-3">
                                     <div id="markdown-display" class="text-white mb-4 animated slideInRight"><small class="text-white ">Please wait, Analyzing...</small></div>
                                </div>
                            </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Newsletter End -->

    <!-- FAQs Start -->
    <div class="container-fluid py-5">
        <div class="container py-5">
            <div class="mx-auto text-center wow fadeIn" data-wow-delay="0.1s" style="max-width: 500px;">
                <div class="btn btn-sm border rounded-pill text-primary px-3 mb-3">Popular FAQs</div>
                <h1 class="mb-4">Sample Questions</h1>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <div class="accordion" id="accordionFAQ1">
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.1s">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="false" aria-controls="collapseOne">
                                    How do consumer preferences differ between Christmas shopping and sustainable shopping?
                                </button>
                            </h2>

                        </div>
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.2s">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="false" aria-controls="collapseTwo">
                                    What motivates consumers to choose sustainable brands?
                                </button>
                            </h2>
                        </div>
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.3s">
                            <h2 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    What are the top factors influencing Christmas shopping habits?
                                </button>
                            </h2>
                        </div>
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.4s">
                            <h2 class="accordion-header" id="headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="true" aria-controls="collapseFour">
                                    How do demographics affect spending on sustainability vs. Christmas shopping?
                                </button>
                            </h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="accordion" id="accordionFAQ2">
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.5s">
                            <h2 class="accordion-header" id="headingFive">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="false" aria-controls="collapseFive">
                                   What are the main concerns consumers have about sustainability?
                                </button>
                            </h2>
                        </div>
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.6s">
                            <h2 class="accordion-header" id="headingSix">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="false" aria-controls="collapseSix">
                                    What is the sentiment towards holiday spending?
                                </button>
                            </h2>
                        </div>
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.7s">
                            <h2 class="accordion-header" id="headingSeven">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="false" aria-controls="collapseSeven">
                                    What factors influence consumers’ decisions to shop online versus in-store during Christmas?
                                </button>
                            </h2>
                        </div>
                        <div class="accordion-item wow fadeIn" data-wow-delay="0.8s">
                            <h2 class="accordion-header" id="headingEight">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#" aria-expanded="false" aria-controls="collapseEight">
                                    How do spending habits differ among various demographic groups during the Christmas season?
                                </button>
                            </h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- FAQs Start -->





    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top pt-2"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/lib/wow/wow.min.js"></script>
    <script src="/static/lib/easing/easing.min.js"></script>
    <script src="/static/lib/waypoints/waypoints.min.js"></script>
    <script src="/static/lib/counterup/counterup.min.js"></script>
    <script src="/static/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>


    <!-- Template Javascript -->
    <script src="/static/js/main.js"></script>
   <script>
        async function handleSubmit(event) {
            event.preventDefault(); // Prevent default form submission

            // Show loader
            document.getElementById("loader-container").style.display = "block";

            const formData = new FormData(event.target); // Get form data

            try {
                const response = await fetch("/submit/", {
                    method: "POST",
                    body: formData
                });

                const result = await response.json();

                // Use marked() to convert markdown to HTML
                const markdownContent = marked.parse(result.message);

                // Insert the markdown content into the div
                document.getElementById("markdown-display").innerHTML = markdownContent;
            } catch (error) {
                console.error("Error:", error);
                document.getElementById("markdown-display").innerHTML = "<p>Error submitting form.</p>";
            } finally {
                // Hide loader after submission completes
                 document.getElementById("loader-container").style.display = "none";
            }
        }
    </script>
</body>

</html>